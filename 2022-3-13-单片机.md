
# 实验一 ：流水灯控制发光管
## 学习目的 ：IO口的控制

### 点亮一个发光管 （实验箱共阴极接法，高电平为点亮灯）
参考代码1：
```c
#include<reg51.h>
 void main()
 { 
   P1=0X01; 
 }
```
参考代码2：
```c
#include<reg51.h>
sbit D2=P1^2;  //sbit 为特殊功能位声明
void main()
{
 D2=1;
}
```

### 发光管闪烁
参考代码1：
```c
#include<reg51.h>
sbit d1=P1^0;
unsigned int a;
void main()
{

  while(1)
  {
    a=50000;
    d1=0;  //灯灭
    while(a--);//a从50000自减到0时，跳出循环
    a=50000;
    d1=1;
    while(a--);
    d1=0;
  }
 }
```
参考程序2
```c
#include<reg51.h>
sbit d1=P1^0;
void delay();
void main()
{
  while(1)
  {
  d1=1;
  delay();
  d1=0;
  delay();
  d1=1;
  }
}

void delay()
{
  int x,y;
  for(x=100;x>0;x--)
  for(y=600;y>0;y--);
 }
```
点亮发光管->控制IO口电平->sbit(位）/Pi
发光管交替闪烁->IO口电平交替赋值->delay函数/while(a--);

# 实验二 单片机中断
## 学习目的：中断原理以及编写方法
### 中断原理
IE（允许）->TCON（控制）->IP（优先）->TMOD（定时器模式）
优先级：抢占优先级（IP控制，c51两个，实现嵌套）＆固有优先级（六个，中断同时发生）
中断响应条件：
1.cpu中断允许EA=1
2.中断允许
3.中断源中断请求

### 外部0中断 通过按键更改LED小灯的状态
```c
#include<reg52.h>
sbit led=P1^0;
sbit k3=P3^2;
typedef unsigned int u16; //typedef简化复杂声明和定义
typedef unsigned char u8;
void delay(u16 i)
{
   while(i--);
}

void main()
{
 EA=1;  //IE->cpu允许中断
 EX0=1; //IE->外部中断0允许
 IT0=1;//TCON->外部中断0触发方式控制，下降沿有效
}

/*中断函数*/
void exter0()interrupt 0
{ 
  delay(1000);
  if(k3==0)
  {led=~led;}
}
```
注：以外部中断1实现相同功能

# 实验三 ：数码管动态显示
## 学习目的 ：数码管显示的基本原理和IO口控制
![KEY](#)
